---
phase: 07-monetization-pricing
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web-portal/app/page.tsx
  - apps/web-portal/lib/seo/schemas.ts
  - apps/web-portal/app/sitemap.ts
  - apps/web-portal/app/robots.ts
autonomous: true

must_haves:
  truths:
    - "Landing page has FAQ section with FAQPage schema"
    - "sitemap.xml returns valid XML with all public pages"
    - "robots.txt allows public pages and disallows dashboard/admin/api"
  artifacts:
    - path: "apps/web-portal/app/page.tsx"
      provides: "Landing page with FAQ section and JSON-LD"
      contains: "FAQPage"
    - path: "apps/web-portal/app/sitemap.ts"
      provides: "Dynamic sitemap generation"
      exports: ["default"]
    - path: "apps/web-portal/app/robots.ts"
      provides: "Dynamic robots.txt generation"
      exports: ["default"]
  key_links:
    - from: "apps/web-portal/app/page.tsx"
      to: "lib/seo/schemas.ts"
      via: "import faqSchema"
      pattern: "import.*faqSchema"
    - from: "apps/web-portal/app/robots.ts"
      to: "sitemap.xml"
      via: "sitemap reference in rules"
      pattern: "sitemap.*sitemap.xml"
---

<objective>
Add FAQ section with FAQPage schema to landing page, create sitemap.ts and robots.ts for SEO.

Purpose: FAQPage schema enables rich results in Google. Sitemap and robots.txt improve crawler discoverability.
Output: Landing page FAQ section, dynamic sitemap.xml and robots.txt generation.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-monetization-pricing/07-RESEARCH.md

@apps/web-portal/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add FAQ section with FAQPage schema to landing page</name>
  <files>
    apps/web-portal/app/page.tsx
    apps/web-portal/lib/seo/schemas.ts
  </files>
  <action>
Enhance landing page with FAQ section and structured data:

1. Update `apps/web-portal/lib/seo/schemas.ts`:
   - Add faqSchema export with FAQPage type
   - Include 5-6 FAQs:
     - "How does Speak for Me work?" - Explain @mention, /watch, shortcut methods
     - "Is my data private?" - Ephemeral messages, only you see suggestions
     - "How does the free trial work?" - 14 days, no credit card, full access
     - "What happens when my trial ends?" - Add payment to continue, or subscription pauses
     - "How does per-seat pricing work?" - Pay per active user, prorated
     - "Can I cancel anytime?" - Yes, via Customer Portal, access until period end

2. Update `apps/web-portal/app/page.tsx`:
   - Add import for JsonLd component and faqSchema
   - Add FAQ section before CTA section:
     - "Frequently Asked Questions" heading
     - Accordion-style or simple list of Q&As
     - Use same styling as existing sections (max-w-6xl, py-20, etc.)
   - Add JsonLd component with faqSchema near top of component
   - Convert to server component if needed, or create separate client FAQ component

Note: If page is currently 'use client', create a separate FAQSection client component and pass schema data as prop to JsonLd which should be in the server component wrapper. Alternatively, embed JSON-LD in layout or use Script component.

Simplest approach: Create a FAQSection client component for interactivity, and add a static script tag for JSON-LD at the page level.
  </action>
  <verify>
    - `npm run build --workspace=web-portal` succeeds
    - Landing page shows FAQ section
    - View source includes FAQPage JSON-LD script
  </verify>
  <done>
    - FAQ section visible on landing page with 5-6 questions
    - FAQPage JSON-LD schema in page source
  </done>
</task>

<task type="auto">
  <name>Task 2: Create sitemap.ts and robots.ts for SEO</name>
  <files>
    apps/web-portal/app/sitemap.ts
    apps/web-portal/app/robots.ts
  </files>
  <action>
Create dynamic sitemap and robots.txt using Next.js metadata API:

1. Create `apps/web-portal/app/sitemap.ts`:
   - Import MetadataRoute from 'next'
   - Export default function returning MetadataRoute.Sitemap array
   - Include public pages:
     - "/" (priority: 1.0, changeFrequency: 'weekly')
     - "/pricing" (priority: 0.9, changeFrequency: 'monthly')
     - "/login" (priority: 0.5, changeFrequency: 'yearly')
   - Use NEXT_PUBLIC_APP_URL env var for base URL, fallback to 'https://speakforme.app'
   - Set lastModified to new Date() for all entries

2. Create `apps/web-portal/app/robots.ts`:
   - Import MetadataRoute from 'next'
   - Export default function returning MetadataRoute.Robots object
   - Configure rules:
     - userAgent: '*'
     - allow: ['/', '/pricing']
     - disallow: ['/dashboard/', '/admin/', '/api/', '/callback', '/install/']
   - Add sitemap reference: `${baseUrl}/sitemap.xml`
  </action>
  <verify>
    - `npm run build --workspace=web-portal` succeeds
    - `curl http://localhost:3001/sitemap.xml` returns valid XML (in dev)
    - `curl http://localhost:3001/robots.txt` returns proper robots directives (in dev)
  </verify>
  <done>
    - /sitemap.xml returns XML with public pages
    - /robots.txt allows public, disallows private routes
    - sitemap referenced in robots.txt
  </done>
</task>

</tasks>

<verification>
1. Build completes: `npm run build --workspace=web-portal`
2. FAQ section renders on landing page
3. Page source contains FAQPage JSON-LD
4. /sitemap.xml accessible and valid
5. /robots.txt accessible with correct rules
</verification>

<success_criteria>
- Landing page FAQ section with 5+ questions
- FAQPage JSON-LD schema in page markup
- sitemap.xml generated dynamically with public pages
- robots.txt correctly allows/disallows routes
</success_criteria>

<output>
After completion, create `.planning/phases/07-monetization-pricing/07-02-SUMMARY.md`
</output>
