---
phase: 07-monetization-pricing
plan: 06
type: execute
wave: 3
depends_on: ["07-01", "07-02", "07-03", "07-04", "07-05", "07-07"]
files_modified:
  - apps/web-portal/app/layout.tsx
  - apps/web-portal/app/page.tsx
  - apps/web-portal/app/pricing/page.tsx
autonomous: false

must_haves:
  truths:
    - "All JSON-LD schemas validate in Google Rich Results Test"
    - "Pricing page renders correctly with CTAs working"
    - "Landing page FAQ section displays properly"
    - "sitemap.xml and robots.txt accessible"
    - "Full trial signup flow works end-to-end"
    - "Email notifications configured (API key set)"
  artifacts: []
  key_links: []
---

<objective>
Verify complete monetization flow with SEO schemas, trial signup, and email notifications.

Purpose: Ensure all Phase 7 components work together correctly before shipping.
Output: Verified working monetization flow with SEO optimization and email notifications.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

# Reference all prior plan summaries
@.planning/phases/07-monetization-pricing/07-01-SUMMARY.md
@.planning/phases/07-monetization-pricing/07-02-SUMMARY.md
@.planning/phases/07-monetization-pricing/07-03-SUMMARY.md
@.planning/phases/07-monetization-pricing/07-04-SUMMARY.md
@.planning/phases/07-monetization-pricing/07-05-SUMMARY.md
@.planning/phases/07-monetization-pricing/07-07-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify SEO and build optimization</name>
  <files>
    apps/web-portal/app/layout.tsx
    apps/web-portal/app/page.tsx
    apps/web-portal/app/pricing/page.tsx
  </files>
  <action>
Verify SEO implementation and optimize for Core Web Vitals:

1. Run production build: `npm run build --workspace=web-portal`
   - Verify no build errors
   - Check for any large bundle warnings

2. Start production preview: `npm run start --workspace=web-portal`

3. Verify sitemap and robots:
   - Access /sitemap.xml - should return valid XML
   - Access /robots.txt - should show correct rules

4. Review JSON-LD placement:
   - Ensure scripts are in `<head>` or early in `<body>`
   - Verify XSS protection (no raw < characters in JSON)
   - Verify SoftwareApplication, Organization, Speakable, and FAQPage schemas present

5. Add metadata exports to pricing page if missing:
   ```typescript
   export const metadata = {
     title: 'Pricing - Speak for Me',
     description: 'Simple, transparent pricing for AI-powered Slack response suggestions. Start with a 14-day free trial.',
     openGraph: {
       title: 'Pricing - Speak for Me',
       description: 'Simple, transparent pricing. Start free.',
     },
   };
   ```

6. Verify landing page metadata:
   - Add or update metadata export with title, description, openGraph

7. Optimize images if any:
   - Use next/image for feature images
   - Add proper width/height to prevent CLS
  </action>
  <verify>
    - `npm run build --workspace=web-portal` succeeds
    - No bundle size warnings
    - curl /sitemap.xml returns XML
    - curl /robots.txt returns rules
  </verify>
  <done>
    - Production build succeeds with optimized bundles
    - All SEO metadata in place
    - sitemap.xml and robots.txt working
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 7 monetization implementation:
1. Public pricing page with Starter ($9) and Pro ($15) plans
2. SoftwareApplication JSON-LD schema on pricing page
3. Organization JSON-LD schema with logo and contact
4. Speakable JSON-LD schema for voice assistant content
5. FAQ section on landing page with FAQPage schema
6. sitemap.xml and robots.txt
7. Trial checkout without payment required
8. Webhook handling for full subscription lifecycle
9. Seat enforcement and trial status display
10. Email notifications for billing events (trial ending, paused, payment failed, resumed)
  </what-built>
  <how-to-verify>
1. Start the app: `npm run dev --workspace=web-portal`

2. Test Pricing Page:
   - Visit http://localhost:3001/pricing
   - Verify two plans display (Starter $9, Pro $15)
   - Verify features listed for each plan
   - View page source, search for "SoftwareApplication" - JSON-LD should be present
   - View page source, search for "Organization" - JSON-LD should be present
   - View page source, search for "SpeakableSpecification" - JSON-LD should be present

3. Test Landing Page FAQ:
   - Visit http://localhost:3001
   - Scroll to FAQ section
   - Verify 5+ questions display with answers
   - View page source, search for "FAQPage" - JSON-LD should be present

4. Test SEO Files:
   - Visit http://localhost:3001/sitemap.xml - should show XML
   - Visit http://localhost:3001/robots.txt - should show rules

5. Test JSON-LD Validation (optional but recommended):
   - Go to https://search.google.com/test/rich-results
   - Enter your production URL or paste page source
   - Verify no errors for SoftwareApplication, Organization, and FAQPage

6. Test Trial Flow (requires Stripe test mode):
   - Click "Start Free Trial" on pricing page
   - Should redirect to Stripe Checkout
   - Verify no payment required upfront (if TRIAL_DAYS and Stripe configured)
   - Complete checkout in test mode
   - Verify redirect back to /admin/billing?trial_started=true

7. Test Dashboard Status:
   - Sign in and visit dashboard
   - If on trial, verify trial countdown banner appears
   - If subscription paused, verify upgrade prompt shows

8. Verify Email Configuration:
   - Confirm RESEND_API_KEY is set in environment
   - Check that email templates exist in lib/email/templates.ts
   - (Optional) Use Stripe CLI to trigger test webhook events and verify emails are sent:
     ```bash
     stripe trigger customer.subscription.trial_will_end
     stripe trigger invoice.payment_failed
     ```
  </how-to-verify>
  <resume-signal>Type "approved" if all verifications pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human verification of complete monetization flow
</verification>

<success_criteria>
- Pricing page displays correctly with plans and JSON-LD (SoftwareApplication, Organization, Speakable)
- Landing page has FAQ with FAQPage schema
- sitemap.xml and robots.txt return correct content
- Trial checkout flow works (Stripe test mode)
- Dashboard shows subscription/trial status
- Email notification infrastructure in place
</success_criteria>

<output>
After completion, create `.planning/phases/07-monetization-pricing/07-06-SUMMARY.md`
</output>
