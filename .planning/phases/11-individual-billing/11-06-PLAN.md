---
phase: 11-individual-billing
plan: 06
type: execute
wave: 4
depends_on: ["11-04", "11-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Complete individual billing flow works end-to-end"
    - "Pricing page toggle switches between individual and team plans"
    - "Individual checkout creates subscription with correct metadata"
    - "Individual billing page shows subscription status correctly"
    - "System correctly identifies individual vs org access"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete individual billing flow.

Purpose: Validate that the entire individual billing feature works correctly before marking the phase complete.
Output: Verified working individual billing system.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/11-individual-billing/11-01-SUMMARY.md
@.planning/phases/11-individual-billing/11-02-SUMMARY.md
@.planning/phases/11-individual-billing/11-03-SUMMARY.md
@.planning/phases/11-individual-billing/11-04-SUMMARY.md
@.planning/phases/11-individual-billing/11-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete individual billing system:
1. User subscriptions database table (email-based identity)
2. Session extended with email field
3. Individual checkout endpoint with Stripe integration
4. Webhook handlers for individual subscription events
5. Dual-path access checking (individual first, then org)
6. User portal for individual subscription management
7. Pricing page with billing mode toggle
8. Individual billing settings page
  </what-built>
  <how-to-verify>
**1. Verify Pricing Page**
- Visit /pricing
- Toggle between "For Myself" and "For My Team"
- Verify individual plans show /month, team plans show /seat/month
- Click "Start Free Trial" on an individual plan

**2. Test Individual Checkout Flow**
- Sign in to the app
- Navigate to /pricing and select individual plan
- Complete checkout (use Stripe test card 4242424242424242)
- Verify redirect to /settings/billing with success message

**3. Verify Individual Billing Page**
- Visit /settings/billing
- Confirm subscription status shows correctly (Active/Trialing)
- Click "Manage Subscription" - should open Stripe Customer Portal
- Return to app

**4. Test Access Checking**
- Sign in as user with individual subscription
- Navigate to dashboard
- Verify access is granted and source shows "Personal subscription"
- If user also has org access, verify overlap warning appears

**5. Test Webhook Processing (Stripe Dashboard)**
- Go to Stripe Dashboard > Webhooks
- Verify recent webhook events show successful processing
- Check that customer.subscription.created/updated events were handled

**6. Verify Database Records**
- Check user_subscriptions table has record with correct email
- Verify subscription_status, plan_id, stripe fields are populated
- Confirm email is stored lowercase

**7. Edge Cases**
- User without subscription sees "Subscribe Now" on /settings/billing
- User with only org access sees org info, not individual sub
- Settings link appears in sidebar for all users
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human verifies the complete individual billing flow works as expected.
</verification>

<success_criteria>
- Pricing page toggle works correctly
- Individual checkout creates subscription
- Webhooks update userSubscriptions table
- Individual billing page shows correct status
- Access checking correctly identifies individual vs org access
- Overlap warning appears when user has both
</success_criteria>

<output>
After completion, create `.planning/phases/11-individual-billing/11-06-SUMMARY.md`
</output>
