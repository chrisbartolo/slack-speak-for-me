---
phase: 14-user-manual-and-knowledge-base
plan: 02
type: execute
wave: 2
depends_on: ["14-01"]
files_modified:
  - apps/web-portal/app/docs/[...slug]/page.tsx
  - apps/web-portal/content/docs/getting-started/first-suggestion.mdx
  - apps/web-portal/content/docs/getting-started/onboarding.mdx
  - apps/web-portal/content/docs/features/watching.mdx
  - apps/web-portal/content/docs/features/suggestions.mdx
  - apps/web-portal/content/docs/features/refinement.mdx
  - apps/web-portal/content/docs/features/style-settings.mdx
  - apps/web-portal/content/docs/features/reports.mdx
  - apps/web-portal/content/docs/features/shortcuts.mdx
autonomous: true

must_haves:
  truths:
    - "User can navigate to any getting-started article and read onboarding instructions"
    - "User can read documentation for every core feature (watching, suggestions, refinement, style, reports, shortcuts)"
    - "Dynamic catch-all route renders any MDX file from content/docs/"
    - "All articles have working navigation (sidebar, breadcrumbs, prev/next)"
  artifacts:
    - path: "apps/web-portal/app/docs/[...slug]/page.tsx"
      provides: "Dynamic catch-all route for all documentation articles"
      exports: ["generateStaticParams", "generateMetadata", "default"]
    - path: "apps/web-portal/content/docs/getting-started/first-suggestion.mdx"
      provides: "Guide for getting first AI suggestion"
      contains: "title:"
    - path: "apps/web-portal/content/docs/getting-started/onboarding.mdx"
      provides: "Complete onboarding walkthrough"
      contains: "title:"
    - path: "apps/web-portal/content/docs/features/watching.mdx"
      provides: "/watch and /unwatch documentation"
      contains: "title:"
    - path: "apps/web-portal/content/docs/features/suggestions.mdx"
      provides: "How AI suggestions work"
      contains: "title:"
    - path: "apps/web-portal/content/docs/features/refinement.mdx"
      provides: "Refinement modal documentation"
      contains: "title:"
    - path: "apps/web-portal/content/docs/features/style-settings.mdx"
      provides: "Style configuration documentation"
      contains: "title:"
    - path: "apps/web-portal/content/docs/features/reports.mdx"
      provides: "Weekly reports documentation"
      contains: "title:"
    - path: "apps/web-portal/content/docs/features/shortcuts.mdx"
      provides: "Message shortcuts documentation"
      contains: "title:"
  key_links:
    - from: "apps/web-portal/app/docs/[...slug]/page.tsx"
      to: "apps/web-portal/lib/docs/content.ts"
      via: "getDocBySlug and getAllDocSlugs imports"
      pattern: "getDocBySlug|getAllDocSlugs"
    - from: "apps/web-portal/app/docs/[...slug]/page.tsx"
      to: "apps/web-portal/content/docs/"
      via: "dynamic import of MDX files"
      pattern: "import.*content/docs/"
---

<objective>
Create the dynamic catch-all route for documentation pages and write all user-facing documentation content (getting-started guides and feature documentation).

Purpose: This delivers the core user manual content that covers all features (SC1) and the onboarding guide (SC4). Users will be able to read documentation about every Speak for Me feature.
Output: Dynamic /docs/[...slug] route rendering MDX content. 10 documentation articles covering getting-started (3) and features (6).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-user-manual-and-knowledge-base/14-RESEARCH.md
@.planning/phases/14-user-manual-and-knowledge-base/14-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dynamic catch-all route for documentation pages</name>
  <files>
    apps/web-portal/app/docs/[...slug]/page.tsx
  </files>
  <action>
    Create `apps/web-portal/app/docs/[...slug]/page.tsx` as a server component:

    1. `generateStaticParams()`: Call `getAllDocSlugs()` from `@/lib/docs/content`, map each slug string to `{ slug: slug.split('/') }` for the catch-all param.

    2. `generateMetadata({ params })`: Await params (Next.js 16 pattern: `params: Promise<{ slug: string[] }>`), join slug array, call `getDocBySlug()`, return `{ title: doc.meta.title, description: doc.meta.description }`. Return empty object if doc not found.

    3. Default export `DocPage({ params })`: Await params, join slug array with '/', call `getDocBySlug()`. If null, call `notFound()` from `next/navigation`.

    4. Dynamic import the MDX file: `const { default: Content } = await import(`@/content/docs/${slug.join('/')}.mdx`)`. This MUST use template literal with fixed prefix for Webpack to resolve.

    5. Render in article element with `prose` classes: `<article className="prose prose-gray max-w-none">`. Show h1 from metadata. Render `<Content />`.

    6. Extract headings from the MDX source for table of contents. Pass headings to the docs-toc component if available in the layout.

    7. Compute prev/next articles using navigation data and pass to docs-pagination component.

    8. Set `export const dynamicParams = false;` to return 404 for unknown slugs.

    IMPORTANT: The params are a Promise in Next.js 16 App Router. Always await them: `const { slug } = await params;`
  </action>
  <verify>
    - Navigate to /docs/getting-started/installation (the sample article from Plan 01) and see it render
    - Navigate to /docs/nonexistent and see 404
    - `npm run build --workspace=web-portal` succeeds with all static params generated
  </verify>
  <done>
    Dynamic catch-all route works. Any MDX file in content/docs/ is accessible at /docs/{path}. Static params pre-render all pages at build time. Unknown slugs return 404.
  </done>
</task>

<task type="auto">
  <name>Task 2: Write getting-started and features documentation articles</name>
  <files>
    apps/web-portal/content/docs/getting-started/first-suggestion.mdx
    apps/web-portal/content/docs/getting-started/onboarding.mdx
    apps/web-portal/content/docs/features/watching.mdx
    apps/web-portal/content/docs/features/suggestions.mdx
    apps/web-portal/content/docs/features/refinement.mdx
    apps/web-portal/content/docs/features/style-settings.mdx
    apps/web-portal/content/docs/features/reports.mdx
    apps/web-portal/content/docs/features/shortcuts.mdx
  </files>
  <action>
    Write 8 MDX documentation articles. Each article MUST have frontmatter with `title`, `description`, `category`, and `order` fields. Use Callout and Step custom components where appropriate.

    **Getting Started (category: "getting-started"):**

    1. `first-suggestion.mdx` (order: 2) - "Getting Your First AI Suggestion"
       - Explain what happens after installation
       - Step-by-step: watch a channel, wait for a message, see the ephemeral suggestion
       - Explain the three suggestion triggers (reply to your message, @mention, active thread)
       - Include Callout tip about ephemeral messages being private
       - Mention Copy and Refine buttons

    2. `onboarding.mdx` (order: 3) - "Complete Onboarding Guide"
       - End-to-end walkthrough from install to productive use
       - Steps: Install app -> Log into web portal -> Configure style -> Watch first channel -> Get suggestion -> Refine -> Set up reports (optional)
       - Include Callout info about the post-install success page
       - Link to detailed articles for each step

    **Features (category: "features"):**

    3. `watching.mdx` (order: 1) - "Watching Conversations"
       - Explain /watch and /unwatch commands
       - What triggers suggestions in watched conversations (table format)
       - How to watch DMs vs channels
       - Managing watched conversations from web portal
       - Callout: suggestions are ephemeral (only you see them)

    4. `suggestions.mdx` (order: 2) - "AI Suggestions"
       - How suggestions work (AI analyzes conversation context)
       - Three trigger types with detailed explanations
       - What context the AI considers (recent messages, thread history)
       - Suggestion format (ephemeral message with Copy/Refine/Dismiss buttons)
       - Callout tip: AI learns your style over time

    5. `refinement.mdx` (order: 3) - "Refining Suggestions"
       - How the Refine modal works
       - Multi-turn conversation with AI
       - Example refinement prompts ("make it more formal", "add a question about timeline")
       - How refinements improve future suggestions
       - Callout info: refinement history is tracked for learning

    6. `style-settings.mdx` (order: 4) - "Configuring Your Style"
       - Accessing style settings from web portal
       - Tone settings (formal, casual, etc.)
       - Custom phrases to use or avoid
       - How style learning works (3 sources: explicit settings, historical messages, refinement feedback)
       - Callout tip: grant message history access for best personalization

    7. `reports.mdx` (order: 5) - "Weekly Reports"
       - Overview of the reports feature
       - Steps to set up: connect Google account -> configure spreadsheet -> set up workflow channel
       - Manual generation via /generate-report
       - Scheduled automatic reports
       - Report format and customization
       - Callout warning: requires Google Sheets integration

    8. `shortcuts.mdx` (order: 6) - "Message Shortcuts"
       - How to use "Help me respond" shortcut
       - Right-click any message -> select shortcut
       - AI generates suggestion delivered via DM
       - When to use shortcuts vs watched conversations
       - Callout tip: works in any channel, not just watched ones

    **Content guidelines for ALL articles:**
    - Write in second person ("you can...", "your suggestions...")
    - Keep paragraphs short (3-4 sentences max)
    - Use tables for comparison/trigger lists
    - Use Step components for sequential instructions
    - Use Callout for tips, warnings, and important notes
    - Include cross-references to related articles using markdown links to /docs/ paths
    - Target 200-400 words per article (concise, scannable)
  </action>
  <verify>
    - `npm run build --workspace=web-portal` succeeds (all MDX files compile)
    - Navigate to each article URL and verify it renders:
      - /docs/getting-started/first-suggestion
      - /docs/getting-started/onboarding
      - /docs/features/watching
      - /docs/features/suggestions
      - /docs/features/refinement
      - /docs/features/style-settings
      - /docs/features/reports
      - /docs/features/shortcuts
    - Sidebar shows all articles organized by category
    - Each article has working prev/next navigation
  </verify>
  <done>
    All user-facing documentation written and rendering. 10 total articles (3 getting-started including installation from Plan 01, 6 features, plus installation). Every core feature documented. Articles use custom components (Callout, Step) and cross-reference each other. Sidebar navigation complete.
  </done>
</task>

</tasks>

<verification>
1. Dynamic catch-all route at /docs/[...slug] works for all content
2. All 8 new articles render correctly with prose typography
3. Custom Callout and Step components render in article content
4. Sidebar navigation shows all articles in correct category order
5. Breadcrumbs show correct path for each article
6. Prev/Next pagination works between articles
7. `npm run build --workspace=web-portal` succeeds
</verification>

<success_criteria>
- Dynamic route serves all MDX content at correct URLs
- 10 documentation articles total covering all user features
- Getting started section provides complete onboarding path
- Features section documents watching, suggestions, refinement, style, reports, shortcuts
- Articles use custom components and cross-reference each other
- Navigation (sidebar, breadcrumbs, pagination) fully functional
</success_criteria>

<output>
After completion, create `.planning/phases/14-user-manual-and-knowledge-base/14-02-SUMMARY.md`
</output>
